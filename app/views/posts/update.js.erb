<% if @post.errors.any? %>
  $("#edit_post_<%= @post.id %>").replaceWith("<%= escape_javascript(render('posts/post_form')) %>");
<% else %>
  $("#edit_post_<%= @post.id %>").replaceWith("<%= escape_javascript(render(@post)) %>");
  $("#flash").replaceWith("<%= escape_javascript(render 'shared/flash_messages') %>");
<% end %>